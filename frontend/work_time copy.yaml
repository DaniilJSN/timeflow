
id: work_time
type: PageSiderMenu
properties:
  logo:
    src: http://localhost:3000/public/logo_web.svg
requests:
  - id: get_timelogs
    type: AxiosHttp
    connectionId: app_api
    properties:
      url: 
        _nunjucks: /api/timelogs/{{user_id}},{{epic_name}}
  - id: get_user_id
    type: AxiosHttp
    connectionId: app_api
    properties:
      url: /api/users
  - id: get_epic_name
    type: AxiosHttp
    connectionId: app_api
    properties:
      url: /api/epics

events:
  onEnter:
    - id: fetch_users
      type: Request
      params: get_user_id
    - id: fetch_epics
      type: Request
      params: get_epic_name
areas:
  content:
    blocks:
      - id: user_id
        type: Selector
        layout:
            span: 3
        properties:
          placeholder: User id
          label:
            disabled: true
          options:
            _request: get_user_id.data
        required: True
      - id: epic_name
        type: Selector
        layout:
            span: 3
        properties:
          placeholder: Epic name
          label:
            disabled: true
          options:
            _request: get_epic_name.data
        required: True
      - id: submit_button
        type: Button
        layout:
          span: 8
        properties:
          title: Search
          icon: SearchOutlined
          color: '#bfbfbf'
          ghost: true
          lock: true
          type: primary # Make the button a primary button with color
        events:
          onClick:
            - id: validate_my_input
              type: Validate
              params:
                - user_id
                - epic_name          
            - id: get_timelogs_data
              type: Request
              params: get_timelogs
            - id: set_timelogs
              type: SetState
              params:
                timelogs_list:
                  _request: get_timelogs.data
      - id: timelogs_list #needs to be the same as the key state
        type: Markdown
        properties:
          content:
            _state: timelogs_list