# Epic admin menu
id: new_epic
type: PageSiderMenu
properties:
  logo:
    src: http://localhost:3000/public/logo_web.svg
requests:
  - id: post_epic
    type: AxiosHttp
    connectionId: app_api
    properties:
      url: /api/epic/
      method: post
      data:
        _state: new_epic_data
events:
  onEnter:
    - id: set_is_submit_visible
      type: SetState
      params:
        is_submit_visible: false
areas:
  content:
    blocks:
      - id: epic_name
        type: TextInput
        layout:
            span: 5
        properties:
          placeholder: New Epic name
          label:
            disabled: true
        required: True
      - id: check_button
        type: Button
        layout:
          span: 2
        properties:
          title: Check Epic
          color: '#595959'
          type: primary
        events:
          onClick:
            - id: check_epic
              type: SetState
              params:
                check_text: 
                  _nunjucks: |
                        #### You are adding epic:
                        |     epic name     |
                        |:-----------------:|
                        |    {{epic_name}}  |
            - id: set_submit_visible
              type: SetState
              params:
                is_submit_visible: true
      - id: reset_button
        type: Button
        layout:
          span: 2
        properties:
          title: Reset
          block: true
          type: default
        events:
          onClick:
            - id: reset
              type: Reset
            - id: set_submit_to_false
              type: SetState
              params:
                is_submit_visible: false
      - id: show_epic
        type: Markdown
        properties:
          content:
            _state: check_text
      - id: submit_epic
        type: Button
        properties:
          title: Add Epic
          # icon: Sa
        layout:
          span: 3
          color: '#595959'
        visible:
          _state: is_submit_visible
        
        events:
          onClick:
            - id: validate_inputs
              type: Validate
              params:
                - epic_name
            - id: set_new_epic
              type: SetState
              params:
                new_epic_data:
                  epic_name:
                    _state: epic_name
            - id: post_epic
              type: Request
              params: post_epic
              
