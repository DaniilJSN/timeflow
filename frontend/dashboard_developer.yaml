id: dashboard_developer
type: PageSiderMenu
properties:
  logo:
    src: http://localhost:3000/public/logo_web.svg
requests:
  - id: get_user_initials
    type: AxiosHttp
    connectionId: app_api
    properties:
      url: /api/users
  
  - id: get_epics_list
    type: AxiosHttp
    connectionId: app_api
    properties:
      url: /api/epics

  # - id: get_work_days
  #   type: AxiosHttp
  #   connectionId: app_api
  #   properties:
  #     url: 
  #       _nunjucks: /api/ddashboard/work_days/{select_initials},{select_month},{select_epic}

events:
  onEnter:
    - id: fetch_users
      type: Request
      params: get_user_initials
    
    - id: fetch_epics
      type: Request
      params: get_epics_list

    # - id: fetch_work_days
    #   type: Request
    #   params: get_work_days

    # - id: set_epics
    #   type: SetState
    #   params:
    #     _request: 
    #       epic_list_state: get_epics_list.data

areas:
  content:
    blocks:
      
      - id: select_initials
        type: AutoComplete
        layout:
            span: 3
        properties:
          placeholder: User initials
          label:
            disabled: true
          options:
            _request: get_user_initials.data
        required: True
      
      - id: select_month
        type: MonthSelector
        layout:
          span: 3
        properties:
          placeholder: Month
          label:
              disabled: true
          disabledDates:
            dates: []
            ranges: []

      - id: select_epic
        type: MultipleSelector
        layout:
          span: 8
        properties:
          placeholder: Select epics
          label:
            disabled: true
          options:
            _request: get_epics_list.data

      - id: dashboard_search
        type: Button
        layout:
          span: 2
        properties:
          title: Search
        events:
          onClick:
            - id: set_dashboard_table
              type: SetState
              params:
                dashboard_table: 
                  _nunjucks: |
                        #### Your search:
                        |     User     |      Month     |      Epic      |  Days worked    |   Forecast  |  Deviation   |
                        |:----------:|:-----------------|:--------------:|:--------------:|:------------:|:------------:|
                        | {{select_initials}}| {{select_month}} | {{select_epic}}|   |    |    |
                    # on:
                    #   epic_list_state:
                    #     _request: get_epics_list.data
                    #   work_days:
                    #     _request: get_work_days.data
                      

      - id: show_dashboard
        type: Markdown
        properties:
          content:
            _state: dashboard_table


# 