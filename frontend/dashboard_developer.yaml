
id: dashboard_developer
type: PageSiderMenu
properties:
  logo:
    src: http://localhost:3000/public/logo_web.svg
requests:
  - id: get_timelogs
    type: AxiosHttp
    connectionId: app_api
    properties:
      url: 
        _nunjucks: /api/timelogs/{{user_id}},{{epic_name}},{{start_time}},{{end_time}}
  - id: get_user_id
    type: AxiosHttp
    connectionId: app_api
    properties:
      url: /api/users
  - id: get_months_dict
    type: AxiosHttp
    connectionId: app_api
    properties:
      url: /api/months

events:
  onEnter:
    - id: fetch_users
      type: Request
      params: get_user_id
    - id: fetch_months
      type: Request
      params: get_months_dict

    - id: months_to_state
      type: SetState
      params:
        months_dict:
          _request: get_months_list.data

    - id: months_dict #needs to be the same as the key state
      type: Markdown
      properties:
        content:
          _state: months_dict.data


areas:
  content:
    blocks:
      
      - id: user_id
        type: AutoComplete
        layout:
            span: 3
        properties:
          placeholder: User id
          label:
            disabled: true
          options:
            _request: get_user_id.data
        required: True
      
      - id: select_month
        type: AutoComplete
        layout:
            span: 3
        properties:
          placeholder: Month
          label:
            disabled: true
          options:
            _request: get_months_dict.data
        required: True
      
      - id: start_time
        type: DateTimeSelector
        required: true
        layout:
          span: 4
          offset: 1
        properties:
          label:
            disabled: true
          placeholder: Start Time
          disabledDates:
            dates: []
            ranges: []
      
      - id: end_time
        type: DateTimeSelector
        required: true
        layout:
          span: 4
          offset: 1
        properties:
          label:
            disabled: true
          placeholder: End Time
          disabledDates:
            dates: []
            ranges: []
          
      - id: submit_button
        type: Button
        layout:
          span: 8
        properties:
          title: Search
          icon: SearchOutlined
          color: '#bfbfbf'
          ghost: true
          lock: true
          type: primary # Make the button a primary button with color
        events:
          onClick:
            - id: validate_my_input
              type: Validate
              params:
                - user_id
                - epic_name
                - ending_time
                - starting_time          
            - id: get_timelogs_data
              type: Request
              params: get_timelogs
            - id: set_timelogs
              type: SetState
              params:
                timelogs_msg:
                  _request: get_timelogs.data
      
      - id: timelogs_list #needs to be the same as the key state
        type: Markdown
        properties:
          content:
            _state: timelogs_msg