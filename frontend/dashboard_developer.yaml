id: dashboard_developer
type: PageSiderMenu
properties:
  logo:
    src: http://localhost:3000/public/logo_web.svg


requests:
  - id: get_user_initials
    type: AxiosHttp
    connectionId: app_api
    properties:
      url: /api/users
  
  - id: get_epics_list
    type: AxiosHttp
    connectionId: app_api
    properties:
      url: /api/epics

  - id: get_months_list
    type: AxiosHttp
    connectionId: app_api
    properties:
      url: /api/months

  - id: post_ddashboard_table
    type: AxiosHttp
    connectionId: app_api
    properties:
      url: 
        _nunjucks: /api/ddashboard/table/{{user_initials}},{{month}},{{epic_name}}
      method: post
      # data:
      #   _state: ddashboard_table
    

        
events:
  onEnter:
    - id: fetch_users
      type: Request
      params: get_user_initials
    
    - id: fetch_epics
      type: Request
      params: get_epics_list

    - id: fetch_months
      type: Request
      params: get_months_list
 
      
areas:
  content:
    blocks:

      - id: user_initials
        type: AutoComplete
        layout:
            span: 3
        properties:
          placeholder: User initials
          label:
            disabled: true
          options:
            _request: get_user_initials.data
        required: True
      
      - id: month
        type: AutoComplete
        layout:
          span: 3
        properties:
          placeholder: Select month
          label:
              disabled: true
          options: 
            _request: get_months_list.data

      - id: epic_name
        type: MultipleSelector
        layout:
          span: 8
        properties:
          placeholder: Select epics
          label:
            disabled: true
          options:
            _request: get_epics_list.data

      - id: dashboard_search
        type: Button
        layout:
          span: 2
        properties:
          title: Search
        events:
          onClick:

            - id: set_ddashboard_table
              type: SetState
              params:
                ddashboard_table:
                  user_initials:
                    _state: user_initials
                  month:
                    _state: month
                  epic_name:
                    _state: epic_name

            - id: post_table
              type: Request
              params: post_ddashboard_table

      - id: block_id
        type: Html
        properties:
          html:
            _request: post_ddashboard_table.data
 